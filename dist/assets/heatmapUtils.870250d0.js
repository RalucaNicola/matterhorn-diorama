import"./index.25dca4c3.js";const T=(()=>{if(!("document"in globalThis))return()=>null;const n=document.createElement("canvas"),r=n.getContext("2d"),t=512;return n.height=t,n.width=1,a=>{r.clearRect(0,0,1,n.height);const e=r.createLinearGradient(0,0,0,n.height);for(const{ratio:c,color:o}of a)e.addColorStop(Math.max(c,.001),`rgba(${o.r}, ${o.g}, ${o.b}, ${o.a})`);return r.fillStyle=e,r.fillRect(0,0,1,n.height),r.getImageData(0,0,1,n.height).data}})();function K(n,r,t,a){const{blurRadius:e,fieldOffset:c,field:o}=r,f=new Float64Array(t*a),s=G(Float64Array,e),u=Math.round(3*e);let d,l=Number.NEGATIVE_INFINITY;const y=R(o,c),h=new Set;for(const A of n){const g=A.getCursor();for(;g.next();){const b=g.getObjectId();if(h.has(b))continue;h.add(b);const i=g.readLegacyPointGeometry(),m=128;if(i.x<-m||i.x>=t+m||i.y<-m||i.y>a+m)continue;const w=+y(g),I=Math.round(i.x)-u,p=Math.round(i.y)-u,N=Math.max(0,I),$=Math.max(0,p),v=Math.min(a,Math.round(i.y)+u),C=Math.min(t,Math.round(i.x)+u);for(let M=$;M<v;M++){const E=s[M-p];for(let x=N;x<C;x++){const F=s[x-I];d=f[M*t+x]+=E*F*w,d>l&&(l=d)}}}}return{matrix:f.buffer,max:l}}function G(n,r,t){var a;const e=Math.round(3*r),c=t!=null&&t.halfKernel?e+1:2*e+1,o=(a=t==null?void 0:t.channels)!=null?a:1,f=new n(c*o),s=1/(2*r*r),u=r/(2*Math.sqrt(2*Math.PI)),d=t!=null&&t.halfKernel?e:0;for(let l=0;l<c;l++){const y=Math.exp(-((l+d-e)**2)*s)*u;for(let h=0;h<o;h++)f[l*o+h]=y}return f}function R(n,r){return n!=null?typeof r=="string"?t=>-1*+t.readAttribute(n):t=>+t.readAttribute(n)+r:t=>1}export{G as f,T as n,K as r};
