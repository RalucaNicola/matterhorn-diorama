import{lY as g,lZ as N,l_ as S,cN as y,l$ as w,m0 as P,I as $,d2 as O,m1 as p,m2 as v,m3 as x,m4 as f,m5 as B,m6 as h,m7 as d,m8 as E}from"./index.25dca4c3.js";function R(e,t,a,l){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?I(e,t,l):P(e,t,l).then(r=>F(r,e.name,t,a,l)):Promise.reject(new $("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function F(e,t,a,l,r){const u=e.data,b={portal:a&&a.portal||O.getDefault(),url:y(e.baseUrl),origin:"portal-item"},n=u.items.find(m=>m.name===t);if(!n){const m=`The symbol name '${t}' could not be found`;return Promise.reject(new $("symbolstyleutils:symbol-name-not-found",m,{symbolName:t}))}let o=p(v(n,l),b),i=n.thumbnail&&n.thumbnail.href;const c=n.thumbnail&&n.thumbnail.imageData;x()&&(o=f(o),i=f(i));const j={portal:a.portal,url:y(w(o)),origin:"portal-item"};return g(o,r).then(m=>{const U=l==="cimRef"?N(m.data):m.data,s=S(U,j);if(s&&B(s)){if(i){const D=p(i,b);s.thumbnail=new h({url:D})}else c&&(s.thumbnail=new h({url:`data:image/png;base64,${c}`}));e.styleUrl?s.styleOrigin=new d({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new d({portal:a.portal,styleName:e.styleName,name:t}))}return s})}function I(e,t,a){const l=E.replace(/\{SymbolName\}/gi,e.name);return g(l,a).then(r=>{const u=N(r.data);return S(u,{portal:t.portal,url:y(w(l)),origin:"portal-item"})})}export{F as fetchSymbolFromStyle,R as resolveWebStyleSymbol};
